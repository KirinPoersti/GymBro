{% extends "base.html" %}
{% block wrap_class %}wrap--wide{% endblock %}
{% block content %}

<!-- Top bar -->
<div class="topbar">
  <div class="actions">
    <a class="icon-btn" title="Profile" href="{{ url_for('dashboard') }}#profile">üë§</a>
    <a class="icon-btn" title="Settings" href="{{ url_for('dashboard') }}#settings">‚öôÔ∏è</a>
  </div>
</div>


<!-- Month header controls -->
<div class="monthbar">
  <a href="{{ url_for('dashboard', y=prev_y, m=prev_m) }}">‚Üê Previous</a>
  <div class="monthtitle">{{ year }} ‚Äì {{ "%02d"|format(month) }}</div>
  <a href="{{ url_for('dashboard', y=next_y, m=next_m) }}">Next ‚Üí</a>
</div>

<!-- Weekday headers -->
<div class="wkhdr">
  {% for n in ["MA","TI","KE","TO","PE","LA","SU"] %}
    <div class="cell head">{{ n }}</div>
  {% endfor %}
</div>

<!-- 6x7 calendar grid -->
<div class="grid">
  {% for d in grid %}
    {# dim days not in current month #}
    {% set dim = (d.month != month) %}
    {% set is_today = (d == today) %}
    <a class="cell day{% if dim %} dim{% endif %}{% if is_today %} today{% endif %}"
       href="{{ url_for('day_view', d=d.isoformat()) }}">
      <div class="num">{{ d.day }}</div>
    </a>
  {% endfor %}
</div>

<style>
  .topbar{
    display:flex; align-items:center; justify-content:space-between;
    margin-bottom: 10px;
  }
  .brand{
    font-weight: 800; font-size: 28px;
  }
  .actions{ display:flex; gap:10px; }
  .icon-btn{
    display:inline-flex; align-items:center; justify-content:center;
    width:40px; height:40px; border:1.5px solid #222; border-radius:10px;
    text-decoration:none; font-size:20px; background:#fff; color:#111;
  }

  .utility{ margin: 12px 0 10px; }
  .pill-btn{
    display:inline-block; padding:10px 16px; border:1.5px solid #222;
    border-radius:12px; text-decoration:none; color:#111; background:#fff;
  }

  .monthbar{
    display:flex; align-items:center; justify-content:space-between;
    margin: 6px 0 10px;
  }
  .monthtitle{ font-weight:700; }

  .wkhdr{
    display:grid; grid-template-columns: repeat(7, 1fr); gap:10px;
    margin-bottom: 8px;
  }

  .grid{
    display:grid; grid-template-columns: repeat(7, 1fr);
    grid-auto-rows: 94px; gap:10px;
  }

  .cell{
    border:1.5px solid #222; border-radius:14px; background:#fff;
    display:flex; align-items:flex-start; justify-content:flex-start;
    padding:8px; text-decoration:none; color:#111; position:relative;
  }
  .cell.head{
    align-items:center; justify-content:center; font-weight:700; height:44px;
  }
  .cell.day .num{ font-weight:700; font-size:14px; }
  .cell.day.dim{ opacity:.45; }
  .cell.day.today{ outline:3px solid #7aa7ff; outline-offset:-3px; }

  @media (max-width: 860px){
    .wrap--wide{ max-width: 100%; }
    .grid{ grid-auto-rows: 80px; }
  }
</style>

{% endblock %}
